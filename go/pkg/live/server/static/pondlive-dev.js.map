{
  "version": 3,
  "sources": ["../../../../client/node_modules/@eleven-am/pondsocket-common/subjects/subject.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/subjects/behaviorSubject.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/subjects/index.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/enums.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/misc/uuid.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/misc/types.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/misc/index.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/schema.js", "../../../../client/node_modules/@eleven-am/pondsocket-common/index.js", "../../../../client/node_modules/@eleven-am/pondsocket-client/core/channel.js", "../../../../client/node_modules/@eleven-am/pondsocket-client/browser/client.js", "../../../../client/node_modules/es5-ext/global.js", "../../../../client/node_modules/websocket/package.json", "../../../../client/node_modules/websocket/lib/version.js", "../../../../client/node_modules/websocket/lib/browser.js", "../../../../client/node_modules/@eleven-am/pondsocket-client/node/node.js", "../../../../client/node_modules/@eleven-am/pondsocket-client/index.js", "../../../../client/src/runtime.ts", "../../../../client/src/logger.ts", "../../../../client/src/vdom.ts", "../../../../client/src/patcher.ts", "../../../../client/src/event-detail.ts", "../../../../client/src/events.ts", "../../../../client/src/router.ts", "../../../../client/src/dom_actions.ts", "../../../../client/src/uploads.ts", "../../../../client/src/entry.ts"],
  "sourcesContent": ["\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Subject_isClosed, _Subject_observers;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Subject = void 0;\nclass Subject {\n    constructor() {\n        _Subject_isClosed.set(this, void 0);\n        _Subject_observers.set(this, void 0);\n        __classPrivateFieldSet(this, _Subject_isClosed, false, \"f\");\n        __classPrivateFieldSet(this, _Subject_observers, new Set(), \"f\");\n    }\n    /**\n     * @desc Returns the number of subscribers\n     */\n    get size() {\n        return __classPrivateFieldGet(this, _Subject_observers, \"f\").size;\n    }\n    /**\n     * @desc Subscribes to a subject\n     * @param observer - The observer to subscribe\n     */\n    subscribe(observer) {\n        if (__classPrivateFieldGet(this, _Subject_isClosed, \"f\")) {\n            throw new Error('Cannot subscribe to a closed subject');\n        }\n        __classPrivateFieldGet(this, _Subject_observers, \"f\").add(observer);\n        return () => __classPrivateFieldGet(this, _Subject_observers, \"f\").delete(observer);\n    }\n    /**\n     * @desc Publishes a message to all subscribers\n     * @param message - The message to publish\n     */\n    publish(message) {\n        __classPrivateFieldGet(this, _Subject_observers, \"f\").forEach((observer) => observer(message));\n    }\n    /**\n     * @desc Closes the subject\n     */\n    close() {\n        __classPrivateFieldGet(this, _Subject_observers, \"f\").clear();\n        __classPrivateFieldSet(this, _Subject_isClosed, true, \"f\");\n    }\n}\nexports.Subject = Subject;\n_Subject_isClosed = new WeakMap(), _Subject_observers = new WeakMap();\n", "\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _BehaviorSubject_lastMessage;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BehaviorSubject = void 0;\nconst subject_1 = require(\"./subject\");\nclass BehaviorSubject extends subject_1.Subject {\n    constructor(initialValue) {\n        super();\n        _BehaviorSubject_lastMessage.set(this, void 0);\n        __classPrivateFieldSet(this, _BehaviorSubject_lastMessage, initialValue, \"f\");\n    }\n    /**\n     * @desc Returns the last message published\n     */\n    get value() {\n        return __classPrivateFieldGet(this, _BehaviorSubject_lastMessage, \"f\");\n    }\n    /**\n     * @desc Publishes a message to all subscribers\n     * @param message - The message to publish\n     */\n    publish(message) {\n        __classPrivateFieldSet(this, _BehaviorSubject_lastMessage, message, \"f\");\n        super.publish(message);\n    }\n    /**\n     * @desc Subscribes to a subject\n     * @param observer - The observer to subscribe\n     */\n    subscribe(observer) {\n        if (__classPrivateFieldGet(this, _BehaviorSubject_lastMessage, \"f\")) {\n            observer(__classPrivateFieldGet(this, _BehaviorSubject_lastMessage, \"f\"));\n        }\n        return super.subscribe(observer);\n    }\n}\nexports.BehaviorSubject = BehaviorSubject;\n_BehaviorSubject_lastMessage = new WeakMap();\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./behaviorSubject\"), exports);\n__exportStar(require(\"./subject\"), exports);\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PubSubEvents = exports.Events = exports.ChannelReceiver = exports.SystemSender = exports.ErrorTypes = exports.ChannelState = exports.ClientActions = exports.ServerActions = exports.PresenceEventTypes = void 0;\nvar PresenceEventTypes;\n(function (PresenceEventTypes) {\n    PresenceEventTypes[\"JOIN\"] = \"JOIN\";\n    PresenceEventTypes[\"LEAVE\"] = \"LEAVE\";\n    PresenceEventTypes[\"UPDATE\"] = \"UPDATE\";\n})(PresenceEventTypes || (exports.PresenceEventTypes = PresenceEventTypes = {}));\nvar ServerActions;\n(function (ServerActions) {\n    ServerActions[\"PRESENCE\"] = \"PRESENCE\";\n    ServerActions[\"SYSTEM\"] = \"SYSTEM\";\n    ServerActions[\"BROADCAST\"] = \"BROADCAST\";\n    ServerActions[\"ERROR\"] = \"ERROR\";\n    ServerActions[\"CONNECT\"] = \"CONNECT\";\n})(ServerActions || (exports.ServerActions = ServerActions = {}));\nvar ClientActions;\n(function (ClientActions) {\n    ClientActions[\"JOIN_CHANNEL\"] = \"JOIN_CHANNEL\";\n    ClientActions[\"LEAVE_CHANNEL\"] = \"LEAVE_CHANNEL\";\n    ClientActions[\"BROADCAST\"] = \"BROADCAST\";\n})(ClientActions || (exports.ClientActions = ClientActions = {}));\nvar ChannelState;\n(function (ChannelState) {\n    ChannelState[\"IDLE\"] = \"IDLE\";\n    ChannelState[\"JOINING\"] = \"JOINING\";\n    ChannelState[\"JOINED\"] = \"JOINED\";\n    ChannelState[\"STALLED\"] = \"STALLED\";\n    ChannelState[\"CLOSED\"] = \"CLOSED\";\n})(ChannelState || (exports.ChannelState = ChannelState = {}));\nvar ErrorTypes;\n(function (ErrorTypes) {\n    ErrorTypes[\"UNAUTHORIZED_CONNECTION\"] = \"UNAUTHORIZED_CONNECTION\";\n    ErrorTypes[\"UNAUTHORIZED_JOIN_REQUEST\"] = \"UNAUTHORIZED_JOIN_REQUEST\";\n    ErrorTypes[\"UNAUTHORIZED_BROADCAST\"] = \"UNAUTHORIZED_BROADCAST\";\n    ErrorTypes[\"INVALID_MESSAGE\"] = \"INVALID_MESSAGE\";\n    ErrorTypes[\"HANDLER_NOT_FOUND\"] = \"HANDLER_NOT_FOUND\";\n    ErrorTypes[\"PRESENCE_ERROR\"] = \"PRESENCE_ERROR\";\n    ErrorTypes[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n    ErrorTypes[\"ENDPOINT_ERROR\"] = \"ENDPOINT_ERROR\";\n    ErrorTypes[\"INTERNAL_SERVER_ERROR\"] = \"INTERNAL_SERVER_ERROR\";\n})(ErrorTypes || (exports.ErrorTypes = ErrorTypes = {}));\nvar SystemSender;\n(function (SystemSender) {\n    SystemSender[\"ENDPOINT\"] = \"ENDPOINT\";\n    SystemSender[\"CHANNEL\"] = \"CHANNEL\";\n})(SystemSender || (exports.SystemSender = SystemSender = {}));\nvar ChannelReceiver;\n(function (ChannelReceiver) {\n    ChannelReceiver[\"ALL_USERS\"] = \"ALL_USERS\";\n    ChannelReceiver[\"ALL_EXCEPT_SENDER\"] = \"ALL_EXCEPT_SENDER\";\n})(ChannelReceiver || (exports.ChannelReceiver = ChannelReceiver = {}));\nvar Events;\n(function (Events) {\n    Events[\"ACKNOWLEDGE\"] = \"ACKNOWLEDGE\";\n    Events[\"CONNECTION\"] = \"CONNECTION\";\n})(Events || (exports.Events = Events = {}));\nvar PubSubEvents;\n(function (PubSubEvents) {\n    PubSubEvents[\"MESSAGE\"] = \"MESSAGE\";\n    PubSubEvents[\"PRESENCE\"] = \"PRESENCE\";\n    PubSubEvents[\"GET_PRESENCE\"] = \"GET_PRESENCE\";\n})(PubSubEvents || (exports.PubSubEvents = PubSubEvents = {}));\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uuid = uuid;\nfunction uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n        .replace(/[xy]/g, (c) => {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./uuid\"), exports);\n__exportStar(require(\"./types\"), exports);\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.channelEventSchema = exports.serverMessageSchema = exports.presenceMessageSchema = exports.clientMessageSchema = exports.ValidationError = void 0;\nconst enums_1 = require(\"./enums\");\n// ============================================================================\n// Validation Error\n// ============================================================================\nclass ValidationError extends Error {\n    constructor(message, path) {\n        super(path ? `${path}: ${message}` : message);\n        this.path = path;\n        this.name = 'ValidationError';\n    }\n}\nexports.ValidationError = ValidationError;\n// ============================================================================\n// Validation Utilities\n// ============================================================================\nfunction isObject(value) {\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isRecord(value) {\n    if (!isObject(value)) {\n        return false;\n    }\n    return Object.keys(value)\n        .every((key) => typeof key === 'string');\n}\nfunction validateString(value, fieldName) {\n    if (!isString(value)) {\n        throw new ValidationError(`Expected string, got ${typeof value}`, fieldName);\n    }\n}\nfunction validateObject(value, fieldName) {\n    if (!isObject(value)) {\n        throw new ValidationError(`Expected object, got ${typeof value}`, fieldName);\n    }\n}\nfunction validateRecord(value, fieldName) {\n    if (!isRecord(value)) {\n        throw new ValidationError(`Expected record with string keys, got ${typeof value}`, fieldName);\n    }\n}\nfunction validateArray(value, fieldName) {\n    if (!isArray(value)) {\n        throw new ValidationError(`Expected array, got ${typeof value}`, fieldName);\n    }\n}\nfunction validateEnum(value, enumObj, fieldName) {\n    const validValues = Object.values(enumObj);\n    if (!validValues.includes(value)) {\n        throw new ValidationError(`Expected one of [${validValues.join(', ')}], got ${JSON.stringify(value)}`, fieldName);\n    }\n}\n// ============================================================================\n// Schema Validators\n// ============================================================================\nexports.clientMessageSchema = {\n    parse(data) {\n        validateObject(data, 'clientMessage');\n        const obj = data;\n        // Validate required fields\n        if (!('event' in obj)) {\n            throw new ValidationError('Missing required field', 'event');\n        }\n        if (!('requestId' in obj)) {\n            throw new ValidationError('Missing required field', 'requestId');\n        }\n        if (!('channelName' in obj)) {\n            throw new ValidationError('Missing required field', 'channelName');\n        }\n        if (!('payload' in obj)) {\n            throw new ValidationError('Missing required field', 'payload');\n        }\n        if (!('action' in obj)) {\n            throw new ValidationError('Missing required field', 'action');\n        }\n        // Validate types\n        validateString(obj.event, 'event');\n        validateString(obj.requestId, 'requestId');\n        validateString(obj.channelName, 'channelName');\n        validateRecord(obj.payload, 'payload');\n        validateEnum(obj.action, enums_1.ClientActions, 'action');\n        return {\n            event: obj.event,\n            requestId: obj.requestId,\n            channelName: obj.channelName,\n            payload: obj.payload,\n            action: obj.action,\n        };\n    },\n};\nexports.presenceMessageSchema = {\n    parse(data) {\n        validateObject(data, 'presenceMessage');\n        const obj = data;\n        // Validate required fields\n        if (!('requestId' in obj)) {\n            throw new ValidationError('Missing required field', 'requestId');\n        }\n        if (!('channelName' in obj)) {\n            throw new ValidationError('Missing required field', 'channelName');\n        }\n        if (!('event' in obj)) {\n            throw new ValidationError('Missing required field', 'event');\n        }\n        if (!('action' in obj)) {\n            throw new ValidationError('Missing required field', 'action');\n        }\n        if (!('payload' in obj)) {\n            throw new ValidationError('Missing required field', 'payload');\n        }\n        // Validate types\n        validateString(obj.requestId, 'requestId');\n        validateString(obj.channelName, 'channelName');\n        validateEnum(obj.event, enums_1.PresenceEventTypes, 'event');\n        // Validate action is exactly PRESENCE\n        if (obj.action !== enums_1.ServerActions.PRESENCE) {\n            throw new ValidationError(`Expected ${enums_1.ServerActions.PRESENCE}, got ${JSON.stringify(obj.action)}`, 'action');\n        }\n        // Validate payload structure\n        validateObject(obj.payload, 'payload');\n        const payload = obj.payload;\n        if (!('presence' in payload)) {\n            throw new ValidationError('Missing required field', 'payload.presence');\n        }\n        if (!('changed' in payload)) {\n            throw new ValidationError('Missing required field', 'payload.changed');\n        }\n        validateArray(payload.presence, 'payload.presence');\n        // Validate each presence item is a record\n        payload.presence.forEach((item, index) => {\n            validateRecord(item, `payload.presence[${index}]`);\n        });\n        validateRecord(payload.changed, 'payload.changed');\n        return {\n            requestId: obj.requestId,\n            channelName: obj.channelName,\n            event: obj.event,\n            action: enums_1.ServerActions.PRESENCE,\n            payload: {\n                presence: payload.presence,\n                changed: payload.changed,\n            },\n        };\n    },\n};\nexports.serverMessageSchema = {\n    parse(data) {\n        validateObject(data, 'serverMessage');\n        const obj = data;\n        // Validate required fields\n        if (!('event' in obj)) {\n            throw new ValidationError('Missing required field', 'event');\n        }\n        if (!('requestId' in obj)) {\n            throw new ValidationError('Missing required field', 'requestId');\n        }\n        if (!('channelName' in obj)) {\n            throw new ValidationError('Missing required field', 'channelName');\n        }\n        if (!('payload' in obj)) {\n            throw new ValidationError('Missing required field', 'payload');\n        }\n        if (!('action' in obj)) {\n            throw new ValidationError('Missing required field', 'action');\n        }\n        // Validate types\n        validateString(obj.event, 'event');\n        validateString(obj.requestId, 'requestId');\n        validateString(obj.channelName, 'channelName');\n        validateRecord(obj.payload, 'payload');\n        // Validate action is one of the allowed server actions\n        const validActions = [\n            enums_1.ServerActions.BROADCAST,\n            enums_1.ServerActions.CONNECT,\n            enums_1.ServerActions.ERROR,\n            enums_1.ServerActions.SYSTEM,\n        ];\n        if (!validActions.includes(obj.action)) {\n            throw new ValidationError(`Expected one of [${validActions.join(', ')}], got ${JSON.stringify(obj.action)}`, 'action');\n        }\n        return {\n            event: obj.event,\n            requestId: obj.requestId,\n            channelName: obj.channelName,\n            payload: obj.payload,\n            action: obj.action,\n        };\n    },\n};\nexports.channelEventSchema = {\n    parse(data) {\n        validateObject(data, 'channelEvent');\n        const obj = data;\n        // Check action to determine which schema to use\n        if (!('action' in obj)) {\n            throw new ValidationError('Missing required field', 'action');\n        }\n        // Discriminate based on action field\n        if (obj.action === enums_1.ServerActions.PRESENCE) {\n            return exports.presenceMessageSchema.parse(data);\n        }\n        return exports.serverMessageSchema.parse(data);\n    },\n};\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./subjects\"), exports);\n__exportStar(require(\"./enums\"), exports);\n__exportStar(require(\"./misc\"), exports);\n__exportStar(require(\"./schema\"), exports);\n", "\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Channel_instances, _Channel_name, _Channel_queue, _Channel_presence, _Channel_presenceSub, _Channel_publisher, _Channel_joinParams, _Channel_receiver, _Channel_clientState, _Channel_joinState, _Channel_emptyQueue, _Channel_init, _Channel_onMessage, _Channel_publish, _Channel_subscribeToPresence;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Channel = void 0;\nconst pondsocket_common_1 = require(\"@eleven-am/pondsocket-common\");\nclass Channel {\n    constructor(publisher, clientState, name, params) {\n        _Channel_instances.add(this);\n        _Channel_name.set(this, void 0);\n        _Channel_queue.set(this, void 0);\n        _Channel_presence.set(this, void 0);\n        _Channel_presenceSub.set(this, void 0);\n        _Channel_publisher.set(this, void 0);\n        _Channel_joinParams.set(this, void 0);\n        _Channel_receiver.set(this, void 0);\n        _Channel_clientState.set(this, void 0);\n        _Channel_joinState.set(this, void 0);\n        __classPrivateFieldSet(this, _Channel_name, name, \"f\");\n        __classPrivateFieldSet(this, _Channel_queue, [], \"f\");\n        __classPrivateFieldSet(this, _Channel_presence, [], \"f\");\n        __classPrivateFieldSet(this, _Channel_joinParams, params, \"f\");\n        __classPrivateFieldSet(this, _Channel_publisher, publisher, \"f\");\n        __classPrivateFieldSet(this, _Channel_clientState, clientState, \"f\");\n        __classPrivateFieldSet(this, _Channel_receiver, new pondsocket_common_1.Subject(), \"f\");\n        __classPrivateFieldSet(this, _Channel_joinState, new pondsocket_common_1.BehaviorSubject(pondsocket_common_1.ChannelState.IDLE), \"f\");\n        __classPrivateFieldSet(this, _Channel_presenceSub, () => {\n            // do nothing\n        }, \"f\");\n    }\n    /**\n     * @desc Gets the current connection state of the channel.\n     */\n    get channelState() {\n        return __classPrivateFieldGet(this, _Channel_joinState, \"f\").value;\n    }\n    /**\n     * @desc Gets the current presence of the channel.\n     */\n    get presence() {\n        return __classPrivateFieldGet(this, _Channel_presence, \"f\");\n    }\n    /**\n     * @desc Acknowledges the channel has been joined on the server.\n     * @param receiver - The receiver to subscribe to.\n     */\n    acknowledge(receiver) {\n        __classPrivateFieldGet(this, _Channel_joinState, \"f\").publish(pondsocket_common_1.ChannelState.JOINED);\n        __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_init).call(this, receiver);\n        __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_emptyQueue).call(this);\n    }\n    /**\n     * @desc Connects to the channel.\n     */\n    join() {\n        const message = {\n            action: pondsocket_common_1.ClientActions.JOIN_CHANNEL,\n            event: pondsocket_common_1.ClientActions.JOIN_CHANNEL,\n            payload: __classPrivateFieldGet(this, _Channel_joinParams, \"f\"),\n            channelName: __classPrivateFieldGet(this, _Channel_name, \"f\"),\n            requestId: (0, pondsocket_common_1.uuid)(),\n        };\n        if (__classPrivateFieldGet(this, _Channel_joinState, \"f\").value === pondsocket_common_1.ChannelState.JOINED) {\n            return;\n        }\n        __classPrivateFieldGet(this, _Channel_joinState, \"f\").publish(pondsocket_common_1.ChannelState.JOINING);\n        if (__classPrivateFieldGet(this, _Channel_clientState, \"f\").value) {\n            __classPrivateFieldGet(this, _Channel_publisher, \"f\").call(this, message);\n        }\n        else {\n            const unsubscribe = __classPrivateFieldGet(this, _Channel_clientState, \"f\").subscribe((state) => {\n                if (state) {\n                    unsubscribe();\n                    if (__classPrivateFieldGet(this, _Channel_joinState, \"f\").value === pondsocket_common_1.ChannelState.JOINING) {\n                        __classPrivateFieldGet(this, _Channel_publisher, \"f\").call(this, message);\n                    }\n                }\n            });\n        }\n    }\n    /**\n     * @desc Disconnects from the channel.\n     */\n    leave() {\n        const message = {\n            action: pondsocket_common_1.ClientActions.LEAVE_CHANNEL,\n            event: pondsocket_common_1.ClientActions.LEAVE_CHANNEL,\n            channelName: __classPrivateFieldGet(this, _Channel_name, \"f\"),\n            requestId: (0, pondsocket_common_1.uuid)(),\n            payload: {},\n        };\n        __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_publish).call(this, message);\n        __classPrivateFieldGet(this, _Channel_joinState, \"f\").publish(pondsocket_common_1.ChannelState.CLOSED);\n        __classPrivateFieldGet(this, _Channel_presenceSub, \"f\").call(this);\n    }\n    /**\n     * @desc Monitors the channel state of the channel.\n     * @param callback - The callback to call when the connection state changes.\n     */\n    onChannelStateChange(callback) {\n        return __classPrivateFieldGet(this, _Channel_joinState, \"f\").subscribe((data) => {\n            callback(data);\n        });\n    }\n    /**\n     * @desc Detects when clients join the channel.\n     * @param callback - The callback to call when a client joins the channel.\n     */\n    onJoin(callback) {\n        return __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_subscribeToPresence).call(this, (event, payload) => {\n            if (event === pondsocket_common_1.PresenceEventTypes.JOIN) {\n                return callback(payload.changed);\n            }\n        });\n    }\n    /**\n     * @desc Detects when clients leave the channel.\n     * @param callback - The callback to call when a client leaves the channel.\n     */\n    onLeave(callback) {\n        return __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_subscribeToPresence).call(this, (event, payload) => {\n            if (event === pondsocket_common_1.PresenceEventTypes.LEAVE) {\n                return callback(payload.changed);\n            }\n        });\n    }\n    /**\n     * @desc Monitors the channel for messages.\n     * @param callback - The callback to call when a message is received.\n     */\n    onMessage(callback) {\n        return __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_onMessage).call(this, (event, message) => {\n            callback(event, message);\n        });\n    }\n    /**\n     * @desc Monitors the channel for messages.\n     * @param event - The event to monitor.\n     * @param callback - The callback to call when a message is received.\n     */\n    onMessageEvent(event, callback) {\n        return this.onMessage((eventReceived, message) => {\n            if (eventReceived === event) {\n                return callback(message);\n            }\n        });\n    }\n    /**\n     * @desc Detects when clients change their presence in the channel.\n     * @param callback - The callback to call when a client changes their presence in the channel.\n     */\n    onPresenceChange(callback) {\n        return __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_subscribeToPresence).call(this, (event, payload) => {\n            if (event === pondsocket_common_1.PresenceEventTypes.UPDATE) {\n                return callback(payload);\n            }\n        });\n    }\n    /**\n     * @desc Monitors the presence of the channel.\n     * @param callback - The callback to call when the presence changes.\n     */\n    onUsersChange(callback) {\n        return __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_subscribeToPresence).call(this, (_event, payload) => callback(payload.presence));\n    }\n    /**\n     * @desc Sends a message to specific clients in the channel.\n     * @param event - The event to send.\n     * @param payload - The message to send.\n     */\n    sendMessage(event, payload) {\n        const requestId = (0, pondsocket_common_1.uuid)();\n        const message = {\n            action: pondsocket_common_1.ClientActions.BROADCAST,\n            channelName: __classPrivateFieldGet(this, _Channel_name, \"f\"),\n            requestId,\n            event,\n            payload,\n        };\n        __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_publish).call(this, message);\n    }\n    /**\n     * @desc Sends a message to the server and waits for a response.\n     * @param sentEvent - The event to send.\n     * @param payload - The message to send.\n     */\n    sendForResponse(sentEvent, payload) {\n        const requestId = (0, pondsocket_common_1.uuid)();\n        return new Promise((resolve) => {\n            const unsub = __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_onMessage).call(this, (_, message, responseId) => {\n                if (requestId === responseId) {\n                    resolve(message);\n                    unsub();\n                }\n            });\n            const message = {\n                action: pondsocket_common_1.ClientActions.BROADCAST,\n                channelName: __classPrivateFieldGet(this, _Channel_name, \"f\"),\n                requestId,\n                event: sentEvent,\n                payload,\n            };\n            __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_publish).call(this, message);\n        });\n    }\n}\nexports.Channel = Channel;\n_Channel_name = new WeakMap(), _Channel_queue = new WeakMap(), _Channel_presence = new WeakMap(), _Channel_presenceSub = new WeakMap(), _Channel_publisher = new WeakMap(), _Channel_joinParams = new WeakMap(), _Channel_receiver = new WeakMap(), _Channel_clientState = new WeakMap(), _Channel_joinState = new WeakMap(), _Channel_instances = new WeakSet(), _Channel_emptyQueue = function _Channel_emptyQueue() {\n    __classPrivateFieldGet(this, _Channel_queue, \"f\")\n        .forEach((message) => __classPrivateFieldGet(this, _Channel_publisher, \"f\").call(this, message));\n    __classPrivateFieldSet(this, _Channel_queue, [], \"f\");\n}, _Channel_init = function _Channel_init(receiver) {\n    __classPrivateFieldGet(this, _Channel_presenceSub, \"f\").call(this);\n    const unsubMessages = receiver.subscribe((data) => {\n        if (data.channelName === __classPrivateFieldGet(this, _Channel_name, \"f\") && this.channelState === pondsocket_common_1.ChannelState.JOINED) {\n            __classPrivateFieldGet(this, _Channel_receiver, \"f\").publish(data);\n        }\n    });\n    const unsubStateChange = __classPrivateFieldGet(this, _Channel_clientState, \"f\").subscribe((state) => {\n        if (state && __classPrivateFieldGet(this, _Channel_joinState, \"f\").value === pondsocket_common_1.ChannelState.STALLED) {\n            const message = {\n                action: pondsocket_common_1.ClientActions.JOIN_CHANNEL,\n                event: pondsocket_common_1.ClientActions.JOIN_CHANNEL,\n                payload: __classPrivateFieldGet(this, _Channel_joinParams, \"f\"),\n                channelName: __classPrivateFieldGet(this, _Channel_name, \"f\"),\n                requestId: (0, pondsocket_common_1.uuid)(),\n            };\n            __classPrivateFieldGet(this, _Channel_publisher, \"f\").call(this, message);\n        }\n        else if (!state && __classPrivateFieldGet(this, _Channel_joinState, \"f\").value === pondsocket_common_1.ChannelState.JOINED) {\n            __classPrivateFieldGet(this, _Channel_joinState, \"f\").publish(pondsocket_common_1.ChannelState.STALLED);\n        }\n    });\n    const unsubPresence = __classPrivateFieldGet(this, _Channel_instances, \"m\", _Channel_subscribeToPresence).call(this, (_, payload) => {\n        __classPrivateFieldSet(this, _Channel_presence, payload.presence, \"f\");\n    });\n    __classPrivateFieldSet(this, _Channel_presenceSub, () => {\n        unsubMessages();\n        unsubStateChange();\n        unsubPresence();\n    }, \"f\");\n}, _Channel_onMessage = function _Channel_onMessage(callback) {\n    return __classPrivateFieldGet(this, _Channel_receiver, \"f\").subscribe((data) => {\n        if (data.action !== pondsocket_common_1.ServerActions.PRESENCE) {\n            return callback(data.event, data.payload, data.requestId);\n        }\n    });\n}, _Channel_publish = function _Channel_publish(data) {\n    if (__classPrivateFieldGet(this, _Channel_joinState, \"f\").value === pondsocket_common_1.ChannelState.JOINED) {\n        return __classPrivateFieldGet(this, _Channel_publisher, \"f\").call(this, data);\n    }\n    __classPrivateFieldGet(this, _Channel_queue, \"f\").push(data);\n}, _Channel_subscribeToPresence = function _Channel_subscribeToPresence(callback) {\n    return __classPrivateFieldGet(this, _Channel_receiver, \"f\").subscribe((data) => {\n        if (data.action === pondsocket_common_1.ServerActions.PRESENCE) {\n            return callback(data.event, data.payload);\n        }\n    });\n};\n", "\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PondClient_instances, _PondClient_channels, _PondClient_createPublisher, _PondClient_handleAcknowledge, _PondClient_init;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PondClient = void 0;\nconst pondsocket_common_1 = require(\"@eleven-am/pondsocket-common\");\nconst channel_1 = require(\"../core/channel\");\nclass PondClient {\n    constructor(endpoint, params = {}) {\n        _PondClient_instances.add(this);\n        _PondClient_channels.set(this, void 0);\n        let address;\n        try {\n            address = new URL(endpoint);\n        }\n        catch (e) {\n            address = new URL(window.location.toString());\n            address.pathname = endpoint;\n        }\n        this._disconnecting = false;\n        const query = new URLSearchParams(params);\n        address.search = query.toString();\n        const protocol = address.protocol === 'https:' ? 'wss:' : 'ws:';\n        if (address.protocol !== 'wss:' && address.protocol !== 'ws:') {\n            address.protocol = protocol;\n        }\n        this._address = address;\n        __classPrivateFieldSet(this, _PondClient_channels, new Map(), \"f\");\n        this._broadcaster = new pondsocket_common_1.Subject();\n        this._connectionState = new pondsocket_common_1.BehaviorSubject(false);\n        __classPrivateFieldGet(this, _PondClient_instances, \"m\", _PondClient_init).call(this);\n    }\n    /**\n     * @desc Connects to the server and returns the socket.\n     */\n    connect() {\n        this._disconnecting = false;\n        const socket = new WebSocket(this._address.toString());\n        socket.onmessage = (message) => {\n            const lines = message.data.trim().split('\\n');\n            for (const line of lines) {\n                if (line.trim()) {\n                    const data = JSON.parse(line);\n                    const event = pondsocket_common_1.channelEventSchema.parse(data);\n                    this._broadcaster.publish(event);\n                }\n            }\n        };\n        socket.onerror = () => socket.close();\n        socket.onclose = () => {\n            this._connectionState.publish(false);\n            if (this._disconnecting) {\n                return;\n            }\n            setTimeout(() => {\n                this.connect();\n            }, 1000);\n        };\n        this._socket = socket;\n    }\n    /**\n     * @desc Returns the current state of the socket.\n     */\n    getState() {\n        return this._connectionState.value;\n    }\n    /**\n     * @desc Disconnects the socket.\n     */\n    disconnect() {\n        var _a;\n        this._connectionState.publish(false);\n        this._disconnecting = true;\n        (_a = this._socket) === null || _a === void 0 ? void 0 : _a.close();\n        __classPrivateFieldGet(this, _PondClient_channels, \"f\").clear();\n    }\n    /**\n     * @desc Creates a channel with the given name and params.\n     * @param name - The name of the channel.\n     * @param params - The params to send to the server.\n     */\n    createChannel(name, params) {\n        const channel = __classPrivateFieldGet(this, _PondClient_channels, \"f\").get(name);\n        if (channel && channel.channelState !== pondsocket_common_1.ChannelState.CLOSED) {\n            return channel;\n        }\n        const publisher = __classPrivateFieldGet(this, _PondClient_instances, \"m\", _PondClient_createPublisher).call(this);\n        const newChannel = new channel_1.Channel(publisher, this._connectionState, name, params || {});\n        __classPrivateFieldGet(this, _PondClient_channels, \"f\").set(name, newChannel);\n        return newChannel;\n    }\n    /**\n     * @desc Subscribes to the connection state.\n     * @param callback - The callback to call when the state changes.\n     */\n    onConnectionChange(callback) {\n        return this._connectionState.subscribe(callback);\n    }\n}\nexports.PondClient = PondClient;\n_PondClient_channels = new WeakMap(), _PondClient_instances = new WeakSet(), _PondClient_createPublisher = function _PondClient_createPublisher() {\n    return (message) => {\n        if (this._connectionState.value) {\n            this._socket.send(JSON.stringify(message));\n        }\n    };\n}, _PondClient_handleAcknowledge = function _PondClient_handleAcknowledge(message) {\n    var _a;\n    const channel = (_a = __classPrivateFieldGet(this, _PondClient_channels, \"f\").get(message.channelName)) !== null && _a !== void 0 ? _a : new channel_1.Channel(__classPrivateFieldGet(this, _PondClient_instances, \"m\", _PondClient_createPublisher).call(this), this._connectionState, message.channelName, {});\n    __classPrivateFieldGet(this, _PondClient_channels, \"f\").set(message.channelName, channel);\n    channel.acknowledge(this._broadcaster);\n}, _PondClient_init = function _PondClient_init() {\n    this._broadcaster.subscribe((message) => {\n        if (message.event === pondsocket_common_1.Events.ACKNOWLEDGE) {\n            __classPrivateFieldGet(this, _PondClient_instances, \"m\", _PondClient_handleAcknowledge).call(this, message);\n        }\n        else if (message.event === pondsocket_common_1.Events.CONNECTION && message.action === pondsocket_common_1.ServerActions.CONNECT) {\n            this._connectionState.publish(true);\n        }\n    });\n};\n", "var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n", "{\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": \"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)\",\n  \"contributors\": [\n    \"I\u00F1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)\"\n  ],\n  \"version\": \"1.0.35\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=4.0.0\"\n  },\n  \"dependencies\": {\n    \"bufferutil\": \"^4.0.1\",\n    \"debug\": \"^2.2.0\",\n    \"es5-ext\": \"^0.10.63\",\n    \"typedarray-to-buffer\": \"^3.1.5\",\n    \"utf-8-validate\": \"^5.0.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"gulp\": \"^4.0.2\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"jshint\": \"^2.0.0\",\n    \"tape\": \"^4.9.1\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"test\": \"tape test/unit/*.js\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"license\": \"Apache-2.0\"\n}\n", "module.exports = require('../package.json').version;\n", "var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PondClient = void 0;\nconst pondsocket_common_1 = require(\"@eleven-am/pondsocket-common\");\nconst client_1 = require(\"../browser/client\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-require-imports\nconst WebSocket = require('websocket').w3cwebsocket;\nclass PondClient extends client_1.PondClient {\n    /**\n     * @desc Connects to the server and returns the socket.\n     */\n    connect(backoff = 1) {\n        this._disconnecting = false;\n        const socket = new WebSocket(this._address.toString());\n        socket.onopen = () => this._connectionState.publish(true);\n        socket.onmessage = (message) => {\n            const lines = message.data.trim().split('\\n');\n            for (const line of lines) {\n                if (line.trim()) {\n                    const data = JSON.parse(line);\n                    const event = pondsocket_common_1.channelEventSchema.parse(data);\n                    this._broadcaster.publish(event);\n                }\n            }\n        };\n        socket.onerror = () => socket.close();\n        socket.onclose = () => {\n            this._connectionState.publish(false);\n            if (this._disconnecting) {\n                return;\n            }\n            setTimeout(() => {\n                this.connect();\n            }, 1000);\n        };\n    }\n}\nexports.PondClient = PondClient;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PondClient = exports.ChannelState = void 0;\nconst pondsocket_common_1 = require(\"@eleven-am/pondsocket-common\");\nObject.defineProperty(exports, \"ChannelState\", { enumerable: true, get: function () { return pondsocket_common_1.ChannelState; } });\nconst client_1 = require(\"./browser/client\");\nconst node_1 = require(\"./node/node\");\nconst PondClient = typeof window === 'undefined' ? node_1.PondClient : client_1.PondClient;\nexports.PondClient = PondClient;\n", "import { PondClient, ChannelState } from '@eleven-am/pondsocket-client';\nimport { BootPayload, FramePayload, InitPayload } from './types';\nimport { Logger } from './logger';\nimport { hydrate } from './vdom';\nimport { Patcher } from './patcher';\nimport { ClientNode } from './types';\nimport { EventManager } from './events';\nimport { Router } from './router';\nimport { DOMActionExecutor } from './dom_actions';\nimport { UploadManager, UploadRuntime, ClientConfig } from './uploads';\n\nexport class LiveRuntime implements UploadRuntime {\n    private client!: PondClient;\n    private channel: any;\n    private config: ClientConfig = {};\n    private root: ClientNode | null = null;\n    private patcher!: Patcher;\n    private eventManager!: EventManager;\n    private router!: Router;\n    private uploadManager!: UploadManager;\n    private refs = new Map<string, ClientNode>();\n    private domActions!: DOMActionExecutor;\n\n    private readonly sessionId: string = '';\n\n    constructor() {\n        const boot = this.getBootPayload();\n        if (!boot) {\n            Logger.error('Runtime', 'No boot payload found');\n            return;\n        }\n\n        this.sessionId = boot.sid;\n        this.config = boot.client || {};\n\n        Logger.configure({ debug: boot.client?.debug });\n        Logger.debug('Runtime', 'Booting...', boot);\n\n        this.connect(boot);\n        this.hydrate(boot);\n    }\n\n    private getBootPayload(): BootPayload | null {\n        if (typeof window === 'undefined') return null;\n        const script = document.getElementById('live-boot');\n        if (script && script.textContent) {\n            try {\n                return JSON.parse(script.textContent);\n            } catch (e) {\n                Logger.error('Runtime', 'Failed to parse boot payload', e);\n            }\n        }\n        return (window as any).__LIVEUI_BOOT__ || null;\n    }\n\n    private hydrate(boot: BootPayload) {\n        try {\n            const jsonTree = JSON.parse(boot.json);\n\n            \n            \n            \n\n            \n            function findHtmlElement(node: any): Element | null {\n                if (node.tag === 'html') {\n                    return document.documentElement;\n                }\n                if (node.children) {\n                    for (const child of node.children) {\n                        const result = findHtmlElement(child);\n                        if (result) return result;\n                    }\n                }\n                return null;\n            }\n\n            const htmlElement = findHtmlElement(jsonTree);\n            if (!htmlElement) {\n                Logger.error('Runtime', 'Could not find <html> element in JSON tree');\n                return;\n            }\n\n            \n            this.root = this.hydrateWithComponentWrappers(jsonTree, htmlElement);\n\n            \n            if (this.eventManager && this.root) {\n                this.eventManager.attach(this.root);\n            }\n\n            \n            if (this.router && this.root) {\n                this.attachRouterRecursively(this.root);\n            }\n\n            if (this.eventManager && this.router && this.uploadManager) {\n                this.patcher = new Patcher(this.root, this.eventManager, this.router, this.uploadManager, this.refs);\n            }\n\n            Logger.debug('Runtime', 'Hydration complete');\n        } catch (e) {\n            Logger.error('Runtime', 'Hydration failed', e);\n        }\n    }\n\n    private hydrateWithComponentWrappers(jsonNode: any, htmlElement: Element): ClientNode {\n        \n        if (jsonNode.tag === 'html') {\n            return hydrate(jsonNode, htmlElement, this.refs);\n        }\n\n        const clientNode: ClientNode = {\n            ...jsonNode,\n            el: null,\n            children: undefined\n        };\n\n        if (jsonNode.componentId) {\n            clientNode.componentId = jsonNode.componentId;\n        }\n\n        if (jsonNode.children && jsonNode.children.length > 0) {\n            clientNode.children = [];\n            for (const child of jsonNode.children) {\n                const childNode = this.hydrateWithComponentWrappers(child, htmlElement);\n                clientNode.children.push(childNode);\n            }\n        }\n\n        if (clientNode.el === null && clientNode.children && clientNode.children.length === 1 && clientNode.children[0].tag === 'html') {\n            clientNode.el = htmlElement;\n        }\n\n        return clientNode;\n    }\n\n    private connect(boot: BootPayload) {\n        const endpoint = boot.client?.endpoint || '/live';\n        this.client = new PondClient(endpoint);\n\n        const joinPayload = {\n            sid: boot.sid,\n            ver: boot.ver,\n            ack: boot.seq,\n            loc: boot.location\n        };\n\n        this.channel = this.client.createChannel(`live/${boot.sid}`, joinPayload);\n        this.eventManager = new EventManager(this.channel, boot.sid);\n        this.router = new Router(this.channel, boot.sid);\n        this.uploadManager = new UploadManager(this);\n        this.domActions = new DOMActionExecutor(this.refs);\n\n        this.channel.onChannelStateChange((state: ChannelState) => {\n            Logger.debug('Runtime', 'Channel state:', state);\n        });\n\n        this.channel.onMessage((event: string, payload: any) => {\n            Logger.debug('WS Recv', event, payload);\n            this.handleMessage(payload);\n        });\n\n        this.client.connect();\n        this.channel.join();\n    }\n\n    getSessionId(): string | undefined {\n        return this.sessionId;\n    }\n\n    getUploadEndpoint(): string {\n        return this.config.upload || '/pondlive/upload';\n    }\n\n    sendUploadMessage(payload: any) {\n        Logger.debug('WS Send', { t: 'upload', ...payload });\n        this.channel.sendMessage({ t: 'upload', ...payload });\n    }\n\n    private handleMessage(msg: any) {\n        switch (msg.t) {\n            case 'frame':\n                this.handleFrame(msg as FramePayload);\n                break;\n            case 'init':\n                this.handleInit(msg as InitPayload);\n                break;\n            case 'domreq':\n                this.handleDOMRequest(msg);\n                break;\n            case 'upload':\n                this.uploadManager.handleControl(msg);\n                break;\n            default:\n                Logger.debug('Runtime', 'Unknown message type', msg.t);\n        }\n    }\n\n    private handleFrame(frame: FramePayload) {\n        Logger.debug('Runtime', 'Received frame', { seq: frame.seq, ops: frame.patch.length });\n\n        if (this.patcher && frame.patch) {\n            for (const op of frame.patch) {\n                this.patcher.apply(op);\n            }\n        }\n\n        if (frame.effects) {\n            this.domActions.execute(frame.effects);\n        }\n\n        if (frame.nav) {\n            this.handleServerNav(frame.nav);\n        }\n    }\n\n    private handleServerNav(nav: { push?: string; replace?: string; back?: boolean }) {\n        Logger.debug('Runtime', 'Server navigation', nav);\n        if (nav.push) {\n            window.history.pushState({}, '', nav.push);\n        } else if (nav.replace) {\n            window.history.replaceState({}, '', nav.replace);\n        } else if (nav.back) {\n            window.history.back();\n        }\n    }\n\n    private handleInit(init: InitPayload) {\n        Logger.debug('Runtime', 'Re-initialized', init);\n        \n    }\n\n    private handleDOMRequest(req: any) {\n        const { id, ref, props, method, args } = req;\n\n        \n        const node = this.refs.get(ref);\n        if (!node || !node.el) {\n            this.sendDOMResponse({ t: 'domres', id, error: 'ref not found' });\n            return;\n        }\n\n        const el = node.el as any;\n\n        try {\n            let result: any;\n            let values: any;\n\n            \n            if (props && Array.isArray(props)) {\n                values = {};\n                for (const prop of props) {\n                    values[prop] = el[prop];\n                }\n            }\n\n            \n            if (method && typeof el[method] === 'function') {\n                result = el[method](...(args || []));\n            }\n\n            this.sendDOMResponse({ t: 'domres', id, result, values });\n        } catch (e: any) {\n            this.sendDOMResponse({ t: 'domres', id, error: e.message || 'unknown error' });\n        }\n    }\n\n    private sendDOMResponse(response: any) {\n        const payload = { ...response, sid: this.sessionId };\n        Logger.debug('WS Send', 'domres', payload);\n        this.channel.sendMessage('domres', payload);\n    }\n\n    private attachRouterRecursively(node: ClientNode) {\n        if (this.router) {\n            this.router.attach(node);\n        }\n        if (node.children) {\n            for (const child of node.children) {\n                this.attachRouterRecursively(child);\n            }\n        }\n    }\n}\n", "export interface LoggerOptions {\n    debug?: boolean;\n}\n\nexport class Logger {\n    private static debugMode = false;\n\n    static configure(options: LoggerOptions) {\n        this.debugMode = options.debug ?? false;\n    }\n\n    static debug(tag: string, message: string, data?: any) {\n        if (!this.debugMode) return;\n        if (data) {\n            console.debug(`[${tag}] ${message}`, data);\n        } else {\n            console.debug(`[${tag}] ${message}`);\n        }\n    }\n\n    static warn(tag: string, message: string, error?: any) {\n        if (error) {\n            console.warn(`[${tag}] ${message}`, error);\n        } else {\n            console.warn(`[${tag}] ${message}`);\n        }\n    }\n\n    static error(tag: string, message: string, error?: any) {\n        if (error) {\n            console.error(`[${tag}] ${message}`, error, (error as any)?.message, (error as any)?.stack);\n        } else {\n            console.error(`[${tag}] ${message}`);\n        }\n    }\n}\n", "import { StructuredNode, ClientNode } from './types';\nimport { Logger } from './logger';\n\nexport function hydrate(json: StructuredNode, dom: Node, refs?: Map<string, ClientNode>): ClientNode {\n    const isWrapper = (!json.tag && !json.text && !json.comment && json.children) || json.fragment;\n\n    const clientNode: ClientNode = { ...json, el: isWrapper ? null : dom, children: undefined };\n\n    if (!isWrapper) {\n        (dom as any).__pondNode = clientNode;\n    }\n\n    if (json.refId && refs) {\n        refs.set(json.refId, clientNode);\n    }\n\n    if (json.tag) {\n        if (dom.nodeType !== Node.ELEMENT_NODE) {\n            throw new Error(`Hydration error: expected element <${json.tag}> but found nodeType ${dom.nodeType}`);\n        } else {\n            const el = dom as Element;\n            if (el.tagName.toLowerCase() !== json.tag.toLowerCase()) {\n                throw new Error(`Hydration error: expected tag <${json.tag}> but found <${el.tagName}>`);\n            }\n        }\n    } else if (json.text !== undefined && json.text !== '') {\n        if (dom.nodeType !== Node.TEXT_NODE) {\n            throw new Error(`Hydration error: expected text node but found nodeType ${dom.nodeType}`);\n        }\n    }\n\n    if (json.children && json.children.length > 0) {\n        clientNode.children = [];\n\n        let domChildren = Array.from(dom.childNodes).filter(shouldHydrate);\n\n        if (json.tag === 'style') {\n            domChildren = [];\n        }\n\n        const consumed = hydrateChildren(clientNode.children, json.children, domChildren, dom, refs);\n        const expected = countRenderableNodes(json.children);\n        if (consumed !== expected) {\n            throw new Error(`Hydration error: expected ${expected} renderable children, hydrated ${consumed}`);\n        }\n    }\n\n    return clientNode;\n}\n\nfunction hydrateChildren(\n    target: ClientNode[],\n    jsonChildren: StructuredNode[],\n    domChildren: Node[],\n    parentDom: Node,\n    refs?: Map<string, ClientNode>\n): number {\n    let domIdx = 0;\n\n    for (let i = 0; i < jsonChildren.length; i++) {\n        const childJson = jsonChildren[i];\n\n        \n        const isWrapper = (!childJson.tag && !childJson.text && !childJson.comment && childJson.children) || childJson.fragment;\n\n        if (isWrapper) {\n            \n            const wrapperNode: ClientNode = { ...childJson, el: null, children: [] };\n            if (childJson.refId && refs) refs.set(childJson.refId, wrapperNode);\n\n            if (childJson.children) {\n                \n                \n                const consumed = hydrateChildrenWithConsumption(\n                    wrapperNode.children!,\n                    childJson.children,\n                    domChildren,\n                    domIdx,\n                    parentDom,\n                    refs\n                );\n                domIdx += consumed;\n            }\n\n            target.push(wrapperNode);\n            continue;\n        }\n\n        \n        if (childJson.text === '') {\n            const childDom = domChildren[domIdx];\n            if (!childDom || childDom.nodeType !== Node.TEXT_NODE) {\n                throw new Error(`Hydration error: expected empty text node at index ${i}`);\n            }\n            const childNode = hydrate(childJson, childDom, refs);\n            target.push(childNode);\n            domIdx++;\n            continue;\n        }\n\n        const childDom = domChildren[domIdx];\n\n        if (!childDom) {\n            Logger.error('Hydration', 'Missing DOM node', {\n                parentTag: (parentDom as any).tagName,\n                expectedIndex: i,\n                domChildrenCount: domChildren.length,\n                jsonChildrenCount: jsonChildren.length,\n                jsonChildSummary: {\n                    tag: childJson.tag,\n                    text: childJson.text,\n                    comment: childJson.comment,\n                    key: childJson.key,\n                    componentId: childJson.componentId,\n                },\n            });\n            throw new Error(`Hydration error: missing DOM node for child index ${i}`);\n        }\n\n        const childNode = hydrate(childJson, childDom, refs);\n        target.push(childNode);\n        domIdx++;\n    }\n\n    return domIdx;\n}\n\n\nfunction hydrateChildrenWithConsumption(\n    target: ClientNode[],\n    jsonChildren: StructuredNode[],\n    domChildren: Node[],\n    startIdx: number,\n    parentDom: Node,\n    refs?: Map<string, ClientNode>\n): number {\n    let domIdx = startIdx;\n\n    for (let i = 0; i < jsonChildren.length; i++) {\n        const childJson = jsonChildren[i];\n\n        \n        const isWrapper = (!childJson.tag && !childJson.text && !childJson.comment && childJson.children) || childJson.fragment;\n\n        if (isWrapper) {\n            \n            const wrapperNode: ClientNode = { ...childJson, el: null, children: [] };\n            if (childJson.refId && refs) refs.set(childJson.refId, wrapperNode);\n\n            if (childJson.children) {\n                const consumed = hydrateChildrenWithConsumption(\n                    wrapperNode.children!,\n                    childJson.children,\n                    domChildren,\n                    domIdx,\n                    parentDom,\n                    refs\n                );\n                domIdx += consumed;\n            }\n\n            target.push(wrapperNode);\n            continue;\n        }\n\n        \n        if (childJson.text === '') {\n            const childDom = domChildren[domIdx];\n            if (!childDom || childDom.nodeType !== Node.TEXT_NODE) {\n                throw new Error(`Hydration error: expected empty text node at index ${i}`);\n            }\n            const childNode = hydrate(childJson, childDom, refs);\n            target.push(childNode);\n            domIdx++;\n            continue;\n        }\n\n        const childDom = domChildren[domIdx];\n\n        if (!childDom) {\n            throw new Error(`Hydration error: missing DOM node for child index ${i}`);\n        }\n\n        const childNode = hydrate(childJson, childDom, refs);\n        target.push(childNode);\n        domIdx++;\n    }\n\n    return domIdx - startIdx;\n}\n\nfunction shouldHydrate(node: Node): boolean {\n    if (node.nodeType === Node.COMMENT_NODE) return false;\n    if (node.nodeType === Node.TEXT_NODE) {\n        const text = (node as Text).data;\n        if (text.trim() === '') return false;\n    }\n    return true;\n}\n\nfunction countRenderableNodes(nodes: StructuredNode[] | undefined): number {\n    if (!nodes || nodes.length === 0) return 0;\n    let count = 0;\n    for (const n of nodes) {\n        const isWrapper = (!n.tag && !n.text && !n.comment && n.children) || n.fragment;\n        if (isWrapper) {\n            count += countRenderableNodes(n.children);\n            continue;\n        }\n        if (n.tag || n.text !== undefined || n.comment) {\n            count++;\n        }\n    }\n    return count;\n}\n", "import { ClientNode, Patch, StructuredNode, Stylesheet } from './types';\nimport { Logger } from './logger';\nimport { hydrate } from './vdom';\nimport { Router } from './router';\nimport { UploadManager } from './uploads';\n\nimport { EventManager } from './events';\n\nexport class Patcher {\n    constructor(\n        private root: ClientNode,\n        private events: EventManager,\n        private router: Router,\n        private uploads: UploadManager,\n        private refs: Map<string, ClientNode>\n    ) { }\n\n    apply(patch: Patch) {\n        const target = this.traverse(patch.path);\n        if (!target) {\n            Logger.warn('Patcher', 'Target not found for path', patch.path);\n            return;\n        }\n\n        Logger.debug('Patcher', 'Apply', {\n            op: patch.op,\n            path: patch.path,\n            index: patch.index,\n            name: patch.name,\n            selector: patch.selector,\n        });\n\n        switch (patch.op) {\n            case 'setText':\n                this.setText(target, patch.value);\n                break;\n            case 'setAttr':\n                this.setAttr(target, patch.value);\n                break;\n            case 'delAttr':\n                this.delAttr(target, patch.name!);\n                break;\n            case 'setStyleDecl':\n                this.setStyleDecl(target, patch.selector!, patch.name!, patch.value);\n                break;\n            case 'delStyleDecl':\n                this.delStyleDecl(target, patch.selector!, patch.name!);\n                break;\n            case 'replaceNode':\n                this.replaceNode(target, patch.value, patch.path);\n                break;\n            case 'addChild':\n                this.addChild(target, patch.value, patch.index!);\n                break;\n            case 'delChild':\n                this.delChild(target, patch.index!, (patch.value as any)?.key);\n                break;\n            case 'moveChild':\n                this.moveChild(target, patch.value);\n                break;\n            case 'setRef':\n                this.setRef(target, patch.value);\n                break;\n            case 'delRef':\n                this.delRef(target);\n                break;\n            case 'setComment':\n                this.setComment(target, patch.value);\n                break;\n            case 'setStyle':\n                this.setStyle(target, patch.value);\n                break;\n            case 'delStyle':\n                this.delStyle(target, patch.name!);\n                break;\n            case 'setHandlers':\n                this.setHandlers(target, patch.value);\n                break;\n            case 'setRouter':\n                this.setRouter(target, patch.value);\n                break;\n            case 'delRouter':\n                this.delRouter(target);\n                break;\n            case 'setUpload':\n                this.setUpload(target, patch.value);\n                break;\n            case 'delUpload':\n                this.delUpload(target);\n                break;\n            case 'setComponent':\n                target.componentId = patch.value;\n                break;\n            default:\n                Logger.warn('Patcher', 'Unsupported op', patch.op);\n        }\n    }\n\n    private traverse(path: number[]): ClientNode | null {\n        let current = this.root;\n        for (const idx of path) {\n            if (!current.children || !current.children[idx]) {\n                Logger.warn('Patcher', 'Traverse missing child', { path, failedIndex: idx, currentTag: current.tag, childrenLength: current.children?.length });\n                return null;\n            }\n            current = current.children[idx];\n        }\n        Logger.debug('Patcher', 'Traverse resolved', {\n            path,\n            tag: current.tag,\n            componentId: current.componentId,\n            key: current.key,\n            hasChildren: !!current.children?.length,\n        });\n        return current;\n    }\n\n    private setText(node: ClientNode, text: string) {\n        if (node.el) {\n            node.el.textContent = text;\n        }\n        node.text = text;\n    }\n\n    private setAttr(node: ClientNode, attrs: Record<string, string[]>) {\n        if (node.el && node.el instanceof Element) {\n            for (const [name, tokens] of Object.entries(attrs)) {\n                node.el.setAttribute(name, tokens.join(' '));\n            }\n        }\n        if (!node.attrs) node.attrs = {};\n        Object.assign(node.attrs, attrs);\n    }\n\n    private delAttr(node: ClientNode, name: string) {\n        if (node.el && node.el instanceof Element) {\n            node.el.removeAttribute(name);\n        }\n        if (node.attrs) delete node.attrs[name];\n    }\n\n    private replaceNode(oldNode: ClientNode, newJson: StructuredNode, path: number[]) {\n        Logger.debug('Patcher', 'replaceNode start', { path });\n        const oldDoms = this.collectDomNodes(oldNode);\n        Logger.debug('Patcher', 'replaceNode collected DOM nodes', { count: oldDoms.length });\n\n        if (oldDoms.length === 0) {\n            Logger.warn('Patcher', 'Cannot replace node with no DOM elements', oldNode);\n            return;\n        }\n\n        const firstDom = oldDoms[0];\n        if (!firstDom.parentNode) {\n            Logger.warn('Patcher', 'Cannot replace node without parent', oldNode);\n            return;\n        }\n\n        const newDom = this.render(newJson);\n        firstDom.parentNode.replaceChild(newDom, firstDom);\n\n        for (let i = 1; i < oldDoms.length; i++) {\n            const node = oldDoms[i];\n            if (node.parentNode) node.parentNode.removeChild(node);\n        }\n\n        this.events.detach(oldNode);\n        this.router.detach(oldNode);\n        this.uploads.unbind(oldNode);\n        this.detachRefsRecursively(oldNode);\n\n        const parentPath = path.slice(0, -1);\n        const childIdx = path[path.length - 1];\n        const parent = this.traverse(parentPath);\n\n        if (parent && parent.children) {\n            const newNode = hydrate(newJson, newDom, this.refs);\n            parent.children[childIdx] = newNode;\n            this.events.attach(newNode);\n            this.router.attach(newNode);\n        }\n    }\n\n    private collectDomNodes(node: ClientNode): Node[] {\n        if (node.el) {\n            return [node.el];\n        }\n        const nodes: Node[] = [];\n        if (node.children) {\n            for (const child of node.children) {\n                const childNodes = this.collectDomNodes(child);\n                for (const n of childNodes) {\n                    nodes.push(n);\n                }\n            }\n        }\n        return nodes;\n    }\n\n    private render(json: StructuredNode): Node {\n        if (json.text !== undefined) {\n            return document.createTextNode(json.text);\n        }\n        if (json.tag) {\n            const el = document.createElement(json.tag);\n            if (json.attrs) {\n                for (const [k, v] of Object.entries(json.attrs)) {\n                    el.setAttribute(k, v.join(' '));\n                }\n            }\n            if (json.style && el instanceof HTMLElement) {\n                for (const [name, value] of Object.entries(json.style)) {\n                    el.style.setProperty(name, value);\n                }\n            }\n            if (json.stylesheet && el instanceof HTMLStyleElement) {\n                el.textContent = this.buildStyleContent(json.stylesheet);\n            }\n            if (json.children) {\n                for (const child of json.children) {\n                    el.appendChild(this.render(child));\n                }\n            }\n            return el;\n        }\n        if (json.children && json.children.length > 0) {\n            const fragment = document.createDocumentFragment();\n            for (const child of json.children) {\n                fragment.appendChild(this.render(child));\n            }\n            return fragment;\n        }\n        return document.createComment(json.comment || '');\n    }\n\n    private addChild(parent: ClientNode, childJson: StructuredNode, index: number) {\n        if (!parent.el || !parent.el.childNodes) {\n            Logger.warn('Patcher', 'Cannot add child to non-element', parent);\n            return;\n        }\n\n        const newDom = this.render(childJson);\n        const newClientNode = hydrate(childJson, newDom, this.refs);\n\n        if (!parent.children) parent.children = [];\n        const safeIndex = Math.max(0, Math.min(index, parent.children.length));\n\n        if (safeIndex >= parent.children.length) {\n            parent.el.appendChild(newDom);\n            parent.children.push(newClientNode);\n        } else {\n            let referenceNode: Node | null = null;\n            for (let i = safeIndex; i < parent.children.length; i++) {\n                if (parent.children[i].el) {\n                    referenceNode = parent.children[i].el;\n                    break;\n                }\n            }\n\n            if (referenceNode) {\n                parent.el.insertBefore(newDom, referenceNode);\n            } else {\n                parent.el.appendChild(newDom);\n            }\n            parent.children.splice(safeIndex, 0, newClientNode);\n        }\n\n        this.events.attach(newClientNode);\n        this.router.attach(newClientNode);\n    }\n\n    private delChild(parent: ClientNode, index: number, key?: string) {\n        if (!parent.children || !parent.children[index]) {\n            if (key && parent.children) {\n                const idxByKey = parent.children.findIndex((c) => c && c.key === key);\n                if (idxByKey >= 0) {\n                    index = idxByKey;\n                }\n            }\n            if (!parent.children || !parent.children[index]) {\n                Logger.warn('Patcher', 'Cannot delete missing child', {\n                    index,\n                    childrenLength: parent.children?.length,\n                    parentTag: parent.tag,\n                    parentComponentId: parent.componentId\n                });\n                return;\n            }\n        }\n\n        const child = parent.children[index];\n        this.removeDomNodes(child);\n        parent.children.splice(index, 1);\n\n        this.events.detach(child);\n        this.router.detach(child);\n        this.uploads.unbind(child);\n        this.detachRefsRecursively(child);\n    }\n\n    private removeDomNodes(node: ClientNode) {\n        const domNodes = this.collectDomNodes(node);\n        for (const domNode of domNodes) {\n            if (domNode.parentNode) {\n                domNode.parentNode.removeChild(domNode);\n            }\n        }\n    }\n\n    private moveChild(parent: ClientNode, value: any) {\n        if (!parent.children || parent.children.length === 0) {\n            Logger.warn('Patcher', 'Cannot move child in empty parent', { value });\n            return;\n        }\n\n        let fromIdx = -1;\n        const toIdx = Math.max(0, Math.min(value.newIdx, parent.children.length - 1));\n\n        if (value.key) {\n            const key = value.key as string;\n            const found = parent.children.findIndex((c) => c && c.key === key);\n            if (found >= 0) {\n                fromIdx = found;\n            }\n        }\n\n        if (fromIdx < 0 || fromIdx >= parent.children.length) {\n            Logger.warn('Patcher', 'Cannot move missing child', { fromIdx, value });\n            return;\n        }\n\n        const child = parent.children[fromIdx];\n\n        parent.children.splice(fromIdx, 1);\n        const insertIdx = Math.max(0, Math.min(toIdx, parent.children.length));\n        parent.children.splice(insertIdx, 0, child);\n\n        if (!parent.el || !child.el) return;\n\n        let referenceNode: Node | null = null;\n        for (let i = insertIdx + 1; i < parent.children.length; i++) {\n            if (parent.children[i].el) {\n                referenceNode = parent.children[i].el;\n                break;\n            }\n        }\n\n        if (referenceNode) {\n            parent.el.insertBefore(child.el, referenceNode);\n        } else {\n            parent.el.appendChild(child.el);\n        }\n    }\n\n    private setRef(node: ClientNode, refId: string) {\n        node.refId = refId;\n        this.refs.set(refId, node);\n    }\n\n    private delRef(node: ClientNode) {\n        if (node.refId) {\n            this.refs.delete(node.refId);\n            delete node.refId;\n        }\n    }\n\n    private setComment(node: ClientNode, comment: string) {\n        if (node.el) {\n            node.el.textContent = comment;\n        }\n        node.comment = comment;\n    }\n\n    private setStyle(node: ClientNode, styles: Record<string, string>) {\n        if (node.el && node.el instanceof HTMLElement) {\n            for (const [name, value] of Object.entries(styles)) {\n                node.el.style.setProperty(name, value);\n            }\n        }\n        if (!node.style) node.style = {};\n        Object.assign(node.style, styles);\n    }\n\n    private setStyleDecl(node: ClientNode, selector: string, name: string, value: string) {\n        if (node.el && node.el instanceof HTMLStyleElement && node.el.sheet) {\n            const sheet = node.el.sheet;\n\n            for (let i = 0; i < sheet.cssRules.length; i++) {\n                const rule = sheet.cssRules[i] as CSSStyleRule;\n                if (rule.selectorText === selector) {\n                    rule.style.setProperty(name, value);\n                    return;\n                }\n            }\n\n            const idx = sheet.cssRules.length;\n            try {\n                sheet.insertRule(`${selector} { ${name}: ${value}; }`, idx);\n            } catch (e) {\n                Logger.warn('Patcher', 'Failed to insert rule', { selector, error: e });\n            }\n        }\n    }\n\n    private delStyleDecl(node: ClientNode, selector: string, name: string) {\n        if (node.el && node.el instanceof HTMLStyleElement && node.el.sheet) {\n            const sheet = node.el.sheet;\n            for (let i = 0; i < sheet.cssRules.length; i++) {\n                const rule = sheet.cssRules[i] as CSSStyleRule;\n                if (rule.selectorText === selector) {\n                    rule.style.removeProperty(name);\n                    return;\n                }\n            }\n        }\n    }\n\n    private delStyle(node: ClientNode, name: string) {\n        if (node.el && node.el instanceof HTMLElement) {\n            node.el.style.removeProperty(name);\n        }\n        if (node.style) delete node.style[name];\n    }\n\n    private setHandlers(node: ClientNode, handlers: any) {\n        this.events.detach(node);\n        node.handlers = handlers;\n        this.events.attach(node);\n    }\n\n    private setRouter(node: ClientNode, router: any) {\n        this.router.detach(node);\n        node.router = router;\n        this.router.attach(node);\n    }\n\n    private delRouter(node: ClientNode) {\n        this.router.detach(node);\n        delete node.router;\n    }\n\n    private setUpload(node: ClientNode, meta: any) {\n        this.uploads.bind(node, meta);\n    }\n\n    private delUpload(node: ClientNode) {\n        this.uploads.unbind(node);\n    }\n\n    private detachRefsRecursively(node: ClientNode) {\n        this.uploads.unbind(node);\n        if (node.refId) {\n            this.refs.delete(node.refId);\n        }\n        if (node.children) {\n            for (const child of node.children) {\n                this.detachRefsRecursively(child);\n            }\n        }\n    }\n\n    private buildStyleContent(stylesheet: Stylesheet): string {\n        const blocks: string[] = [];\n\n        if (stylesheet.rules) {\n            for (const rule of stylesheet.rules) {\n                const entries: string[] = [];\n                for (const [name, value] of Object.entries(rule.props)) {\n                    entries.push(`${name}: ${value};`);\n                }\n                if (entries.length > 0) {\n                    blocks.push(`${rule.selector} { ${entries.join(' ')} }`);\n                }\n            }\n        }\n\n        if (stylesheet.mediaBlocks) {\n            for (const media of stylesheet.mediaBlocks) {\n                const mediaRules: string[] = [];\n                for (const rule of media.rules) {\n                    const entries: string[] = [];\n                    for (const [name, value] of Object.entries(rule.props)) {\n                        entries.push(`${name}: ${value};`);\n                    }\n                    if (entries.length > 0) {\n                        mediaRules.push(`  ${rule.selector} { ${entries.join(' ')} }`);\n                    }\n                }\n                if (mediaRules.length > 0) {\n                    blocks.push(`@media ${media.query} {\\n${mediaRules.join('\\n')}\\n}`);\n                }\n            }\n        }\n\n        return blocks.join('\\n');\n    }\n}\n", "interface ExtractOptions {\n  refElement?: Element;\n}\n\nexport function extractEventDetail(event: Event, props?: string[] | null, options?: ExtractOptions): Record<string, unknown> | undefined {\n  if (!Array.isArray(props) || props.length === 0) {\n    return undefined;\n  }\n  const detail: Record<string, unknown> = {};\n  props.forEach((path) => {\n    if (typeof path !== 'string' || path.length === 0) {\n      return;\n    }\n    const value = resolvePath(path, event, options);\n    if (value !== undefined) {\n      detail[path] = value;\n    }\n  });\n  return Object.keys(detail).length > 0 ? detail : undefined;\n}\n\nfunction resolvePath(path: string, event: Event, options?: ExtractOptions): unknown {\n  const segments = path.split('.').map((segment) => segment.trim()).filter(Boolean);\n  if (segments.length === 0) {\n    return undefined;\n  }\n  const root = segments.shift()!;\n  let current: any;\n  switch (root) {\n    case 'event':\n      current = event;\n      break;\n    case 'target':\n      current = event.target ?? null;\n      break;\n    case 'currentTarget':\n      current = event.currentTarget ?? null;\n      break;\n    case 'element':\n    case 'ref':\n      current = options?.refElement ?? (event.currentTarget instanceof Element ? event.currentTarget : null);\n      break;\n    default:\n      return undefined;\n  }\n  for (const segment of segments) {\n    if (current == null) {\n      return undefined;\n    }\n    try {\n      current = current[segment as keyof typeof current];\n    } catch {\n      return undefined;\n    }\n  }\n  return serializeValue(current);\n}\n\nfunction serializeValue(value: unknown): unknown {\n  if (value === null || value === undefined) {\n    return null;\n  }\n  const type = typeof value;\n  if (type === 'string' || type === 'number' || type === 'boolean') {\n    return value;\n  }\n  if (Array.isArray(value)) {\n    const mapped = value.map(serializeValue).filter((entry) => entry !== undefined);\n    return mapped.length > 0 ? mapped : null;\n  }\n  if (value instanceof Date) {\n    return value.toISOString();\n  }\n  if (value instanceof DOMTokenList) {\n    return Array.from(value);\n  }\n  if (value instanceof Node) {\n    return undefined;\n  }\n  try {\n    return JSON.parse(JSON.stringify(value));\n  } catch {\n    return undefined;\n  }\n}\n", "import { ClientNode, HandlerMeta } from './types';\nimport { Logger } from './logger';\nimport { extractEventDetail } from './event-detail';\n\ntype ListenerRecord = {\n    handlerId: string;\n    listener: EventListener;\n};\n\nexport class EventManager {\n    private listeners = new WeakMap<Node, Map<string, ListenerRecord[]>>();\n\n    constructor(private channel: any, private sid: string) { }\n\n    attach(node: ClientNode) {\n        if (!node) return;\n\n        \n        if (node.el && node.handlers && node.handlers.length > 0) {\n            this.bindEvents(node);\n        }\n\n        \n        if (node.children) {\n            for (const child of node.children) {\n                this.attach(child);\n            }\n        }\n    }\n\n    detach(node: ClientNode) {\n        if (!node) return;\n\n        \n        if (node.el) {\n            this.unbindEvents(node.el);\n        }\n\n        \n        if (node.children) {\n            for (const child of node.children) {\n                this.detach(child);\n            }\n        }\n    }\n\n    private bindEvents(node: ClientNode) {\n        if (!node.el || !node.handlers) return;\n\n        const el = node.el;\n        let nodeListeners = this.listeners.get(el);\n        if (!nodeListeners) {\n            nodeListeners = new Map();\n            this.listeners.set(el, nodeListeners);\n        }\n\n        for (const h of node.handlers) {\n            if (!h || !h.event || !h.handler) continue;\n\n            const existing = nodeListeners.get(h.event) || [];\n            const duplicate = existing.some((rec) => rec.handlerId === h.handler);\n            if (duplicate) {\n                continue;\n            }\n\n            const listener = (e: Event) => {\n                const preventDefault = !(h.listen && h.listen.includes('allowDefault'));\n                if (preventDefault && e.cancelable) {\n                    e.preventDefault();\n                }\n\n                this.triggerHandler(h, e, node);\n\n                if (!h.listen || !h.listen.includes('bubble')) {\n                    e.stopPropagation();\n                }\n            };\n\n            el.addEventListener(h.event, listener);\n            nodeListeners.set(h.event, [...existing, { handlerId: h.handler, listener }]);\n            Logger.debug('Events', 'Attached listener', { event: h.event, handler: h.handler });\n        }\n    }\n\n    private unbindEvents(el: Node) {\n        const nodeListeners = this.listeners.get(el);\n        if (!nodeListeners) return;\n\n        for (const [event, records] of nodeListeners.entries()) {\n            for (const rec of records) {\n                el.removeEventListener(event, rec.listener);\n            }\n        }\n        this.listeners.delete(el);\n    }\n\n    private triggerHandler(handler: HandlerMeta, e: Event, node: ClientNode) {\n        Logger.debug('Events', 'Triggering handler', { handlerId: handler.handler, type: e.type });\n\n        const refElement = node.el instanceof Element ? node.el : undefined;\n        const detail = extractEventDetail(e, handler.props, { refElement });\n\n        const payload: any = {\n            name: e.type\n        };\n\n        if (detail !== undefined) {\n            payload.detail = detail;\n        }\n\n        Logger.debug('WS Send', 'evt', {\n            t: 'evt',\n            sid: this.sid,\n            hid: handler.handler,\n            payload: payload\n        });\n        this.channel.sendMessage('evt', {\n            t: 'evt',\n            sid: this.sid,\n            hid: handler.handler,\n            payload: payload\n        });\n    }\n}\n", "import { ClientNode, RouterMeta } from './types';\nimport { Logger } from './logger';\n\nexport class Router {\n    private listeners = new WeakMap<Node, EventListener>();\n\n    constructor(private channel: any, private sessionId: string) {\n        window.addEventListener('popstate', (e) => this.onPopState(e));\n    }\n\n    attach(node: ClientNode) {\n        if (!node || !node.router || !node.el) return;\n\n        const el = node.el;\n        if (this.listeners.has(el)) return;\n\n        const listener = (e: Event) => {\n            e.preventDefault();\n            this.navigate(node.router!);\n        };\n\n        el.addEventListener('click', listener);\n        this.listeners.set(el, listener);\n    }\n\n    detach(node: ClientNode) {\n        if (!node || !node.el) return;\n\n        const el = node.el;\n        const listener = this.listeners.get(el);\n        if (listener) {\n            el.removeEventListener('click', listener);\n            this.listeners.delete(el);\n        }\n    }\n\n    navigate(meta: RouterMeta) {\n        const path = meta.path ?? window.location.pathname;\n        \n        \n        const query = meta.query !== undefined ? meta.query : window.location.search;\n        const hash = meta.hash !== undefined ? meta.hash : window.location.hash;\n\n        \n        const cleanQuery = query.startsWith('?') ? query.substring(1) : query;\n        const url = path + (cleanQuery ? '?' + cleanQuery : '') + (hash ? '#' + hash : '');\n\n        if (meta.replace) {\n            window.history.replaceState({}, '', url);\n        } else {\n            window.history.pushState({}, '', url);\n        }\n\n        this.sendNav('nav', path, cleanQuery, hash);\n    }\n\n    private onPopState(_e: PopStateEvent) {\n        const path = window.location.pathname;\n        const query = window.location.search;\n        const hash = window.location.hash;\n\n        this.sendNav('pop', path, query, hash);\n    }\n\n    private sendNav(type: 'nav' | 'pop', path: string, query: string, hash: string) {\n        Logger.debug('Router', `Sending ${type}`, { path, query, hash });\n\n        \n        \n        \n        \n        \n        const q = query.startsWith('?') ? query.substring(1) : query;\n\n        Logger.debug('WS Send', type, {\n            sid: this.sessionId,\n            path: path,\n            q: q,\n            hash: hash\n        });\n        this.channel.sendMessage(type, {\n            sid: this.sessionId,\n            path: path,\n            q: q,\n            hash: hash\n        });\n    }\n}\n", "import { DOMActionEffect, ClientNode } from './types';\nimport { Logger } from './logger';\n\nexport class DOMActionExecutor {\n    constructor(private refs: Map<string, ClientNode>) { }\n\n    execute(effects: DOMActionEffect[]) {\n        if (!effects || effects.length === 0) return;\n\n        for (const effect of effects) {\n            this.executeOne(effect);\n        }\n    }\n\n    private executeOne(effect: DOMActionEffect) {\n        const node = this.refs.get(effect.ref);\n        if (!node || !node.el) {\n            Logger.warn('DOMAction', 'Ref not found', { ref: effect.ref });\n            return;\n        }\n\n        const el = node.el as any;\n\n        try {\n            switch (effect.kind) {\n                case 'dom.call':\n                    if (effect.method && typeof el[effect.method] === 'function') {\n                        el[effect.method](...(effect.args || []));\n                    } else {\n                        Logger.warn('DOMAction', 'Method not found', { method: effect.method });\n                    }\n                    break;\n\n                case 'dom.set':\n                    if (effect.prop) {\n                        el[effect.prop] = effect.value;\n                    }\n                    break;\n\n                case 'dom.toggle':\n                    if (effect.prop) {\n                        el[effect.prop] = !el[effect.prop];\n                    }\n                    break;\n\n                case 'dom.class':\n                    if (effect.class) {\n                        if (effect.on === true) {\n                            el.classList.add(effect.class);\n                        } else if (effect.on === false) {\n                            el.classList.remove(effect.class);\n                        } else {\n                            el.classList.toggle(effect.class);\n                        }\n                    }\n                    break;\n\n                case 'dom.scroll':\n                    if (el.scrollIntoView) {\n                        const opts: ScrollIntoViewOptions = {};\n                        if (effect.behavior) opts.behavior = effect.behavior as ScrollBehavior;\n                        if (effect.block) opts.block = effect.block as ScrollLogicalPosition;\n                        if (effect.inline) opts.inline = effect.inline as ScrollLogicalPosition;\n                        el.scrollIntoView(opts);\n                    }\n                    break;\n\n                default:\n                    Logger.warn('DOMAction', 'Unknown action kind', { kind: effect.kind });\n            }\n        } catch (e) {\n            Logger.error('DOMAction', 'Execution failed', e);\n        }\n    }\n}\n", "import { Logger } from './logger';\nimport { ClientNode, UploadMeta, UploadControlMessage } from './types';\n\ntype BindingRecord = {\n    node: ClientNode;\n    element: HTMLInputElement;\n    meta: UploadMeta;\n    changeHandler: (event: Event) => void;\n};\n\ntype ActiveUpload = {\n    xhr: XMLHttpRequest;\n    element: HTMLInputElement;\n};\n\nexport interface UploadRuntime {\n    getSessionId(): string | undefined;\n    getUploadEndpoint(): string;\n    sendUploadMessage(payload: any): void;\n}\n\nexport interface ClientConfig {\n    endpoint?: string;\n    upload?: string;\n    debug?: boolean;\n}\n\nexport class UploadManager {\n    private bindings = new Map<string, BindingRecord>();\n    private active = new Map<string, ActiveUpload>();\n\n    constructor(private runtime: UploadRuntime) { }\n\n    bind(node: ClientNode, meta: UploadMeta) {\n        if (!node.el || !(node.el instanceof HTMLInputElement)) {\n            Logger.warn('Uploads', 'Upload binding requires an input element', node);\n            return;\n        }\n        const element = node.el;\n        const uploadId = meta.uploadId;\n\n        \n        this.unbind(node);\n\n        const handler = () => this.handleInputChange(uploadId, element, meta);\n        element.addEventListener('change', handler);\n\n        \n        if (meta.accept && meta.accept.length > 0) {\n            element.setAttribute('accept', meta.accept.join(','));\n        } else {\n            element.removeAttribute('accept');\n        }\n\n        if (meta.multiple) {\n            Logger.warn('Uploads', 'Multiple file selection not supported; forcing single file');\n            element.removeAttribute('multiple');\n        } else {\n            element.removeAttribute('multiple');\n        }\n\n        this.bindings.set(uploadId, { node, element, meta, changeHandler: handler });\n        Logger.debug('Uploads', 'Bound upload', uploadId);\n    }\n\n    unbind(node: ClientNode) {\n        \n        \n        \n        \n        \n        \n        \n\n        for (const [id, binding] of this.bindings.entries()) {\n            if (binding.node === node) {\n                this.detachBinding(id);\n                return;\n            }\n        }\n    }\n\n    private detachBinding(uploadId: string) {\n        const binding = this.bindings.get(uploadId);\n        if (!binding) return;\n\n        binding.element.removeEventListener('change', binding.changeHandler);\n        this.bindings.delete(uploadId);\n        this.abortUpload(uploadId, false);\n        Logger.debug('Uploads', 'Unbound upload', uploadId);\n    }\n\n    handleControl(message: UploadControlMessage) {\n        if (!message || !message.id) return;\n        Logger.debug('Uploads', 'Control message', message);\n        if (message.op === 'cancel' || message.op === 'error') {\n            this.abortUpload(message.id, true);\n        }\n    }\n\n    private handleInputChange(uploadId: string, element: HTMLInputElement, meta: UploadMeta) {\n        const files = element.files;\n        if (!files || files.length === 0) {\n            this.sendMessage({ op: 'cancelled', id: uploadId });\n            this.abortUpload(uploadId, true);\n            return;\n        }\n\n        const file = files[0]; \n        if (meta.multiple && files.length > 1) {\n            this.sendMessage({\n                op: 'error',\n                id: uploadId,\n                error: 'Multiple file uploads are not supported yet'\n            });\n            element.value = '';\n            return;\n        }\n\n        if (!file) {\n            this.sendMessage({ op: 'cancelled', id: uploadId });\n            return;\n        }\n\n        if (meta.maxSize && meta.maxSize > 0 && file.size > meta.maxSize) {\n            this.sendMessage({\n                op: 'error',\n                id: uploadId,\n                error: `File exceeds maximum size (${meta.maxSize} bytes)`\n            });\n            element.value = '';\n            return;\n        }\n\n        const fileMeta = { name: file.name, size: file.size, type: file.type };\n        this.sendMessage({ op: 'change', id: uploadId, meta: fileMeta });\n        this.startUpload(uploadId, file, element);\n    }\n\n    private startUpload(uploadId: string, file: File, element: HTMLInputElement) {\n        const sid = this.runtime.getSessionId();\n        if (!sid) return;\n\n        const base = this.runtime.getUploadEndpoint();\n        const target = `${base.replace(/\\/+$/, '')}/${encodeURIComponent(sid)}/${encodeURIComponent(uploadId)}`;\n\n        this.abortUpload(uploadId, false);\n\n        const xhr = new XMLHttpRequest();\n        xhr.upload.onprogress = (event) => {\n            const loaded = event.loaded;\n            const total = event.lengthComputable ? event.total : file.size;\n            this.sendMessage({ op: 'progress', id: uploadId, loaded, total });\n        };\n\n        xhr.onerror = () => {\n            this.active.delete(uploadId);\n            this.sendMessage({ op: 'error', id: uploadId, error: 'Upload failed' });\n        };\n\n        xhr.onabort = () => {\n            this.active.delete(uploadId);\n            this.sendMessage({ op: 'cancelled', id: uploadId });\n        };\n\n        xhr.onload = () => {\n            this.active.delete(uploadId);\n            if (xhr.status < 200 || xhr.status >= 300) {\n                this.sendMessage({ op: 'error', id: uploadId, error: `Upload failed (${xhr.status})` });\n            } else {\n                this.sendMessage({ op: 'progress', id: uploadId, loaded: file.size, total: file.size });\n                element.value = '';\n            }\n        };\n\n        const form = new FormData();\n        form.append('file', file);\n        xhr.open('POST', target, true);\n        xhr.send(form);\n\n        this.active.set(uploadId, { xhr, element });\n        Logger.debug('Uploads', 'Started upload', { uploadId, target });\n    }\n\n    private abortUpload(uploadId: string, clearInput: boolean) {\n        const active = this.active.get(uploadId);\n        if (!active) return;\n\n        active.xhr.abort();\n        if (clearInput) {\n            active.element.value = '';\n        }\n        this.active.delete(uploadId);\n    }\n\n    private sendMessage(payload: any) {\n        Logger.debug('WS Send', 'upload', payload);\n        this.runtime.sendUploadMessage(payload);\n    }\n}\n", "import { LiveRuntime } from './runtime';\n\n\nif (typeof window !== 'undefined') {\n    window.addEventListener('DOMContentLoaded', () => {\n        const instance = new LiveRuntime();\n        \n        (window as any).__LIVEUI__ = instance;\n    });\n}\n"],
  "mappings": "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",
  "names": ["exports", "PresenceEventTypes", "ServerActions", "ClientActions", "ChannelState", "ErrorTypes", "SystemSender", "ChannelReceiver", "Events", "PubSubEvents", "exports", "exports", "message", "_Channel_emptyQueue", "_Channel_init", "_Channel_onMessage", "_Channel_publish", "_Channel_subscribeToPresence", "PondClient", "_PondClient_createPublisher", "_PondClient_handleAcknowledge", "_PondClient_init", "WebSocket", "PondClient", "PondClient", "childDom", "childNode", "findHtmlElement"]
}
